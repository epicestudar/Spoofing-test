Resources:
  SendAndLogFunction:
    Type: AWS::Serverless::Function
    Properties:
      FunctionName: SendAndLogFunction
      Handler: src/handler.sendAndLog
      Runtime: nodejs18.x
      MemorySize: 128
      Timeout: 30
      Environment:
        Variables:
          SENDER_EMAIL: nayiya1429@harinv.com
          LOG_TABLE: EmailLogs
      Events:
        SendEndpoint:
          Type: Api
          Properties:
            Path: /send
            Method: POST
            Cors:
              AllowOrigins: "'http://localhost:3000'"
              AllowHeaders: "'Content-Type'"
              AllowMethods: "'OPTIONS,POST'"
      Policies:
        - AmazonSESFullAccess
        - AmazonDynamoDBFullAccess
